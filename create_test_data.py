#!/usr/bin/env python3
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫.
"""

from models import WorkoutSetModel, ExerciseModel

def create_test_exercises(workoutset_code, exercises_data):
    """–°–æ–∑–¥–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –¥–ª—è –∫–æ–º–ø–ª–µ–∫—Å–∞."""
    created_codes = []

    for exercise_data in exercises_data:
        try:
            code = ExerciseModel.create(
                workoutset_code=workoutset_code,
                name=exercise_data['name'],
                description=exercise_data.get('description', ''),
                repeat_count=exercise_data.get('repeat_count', 10),
                round_count=exercise_data.get('round_count', 3),
                rest_seconds=exercise_data.get('rest_seconds', 60)
            )
            created_codes.append(code)
            print(f"  ‚úì –°–æ–∑–¥–∞–Ω–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ: {exercise_data['name']}")
        except Exception as e:
            print(f"  ‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è {exercise_data['name']}: {e}")

    return created_codes

def create_test_workout_sets():
    """–°–æ–∑–¥–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–æ–º–ø–ª–µ–∫—Å—ã —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π —Å —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è–º–∏."""

    test_sets = [
        {
            'name': '–£—Ç—Ä–µ–Ω–Ω—è—è —Ä–∞–∑–º–∏–Ω–∫–∞',
            'description': '–ü—Ä–æ—Å—Ç–æ–π –∫–æ–º–ø–ª–µ–∫—Å —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π –¥–ª—è –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è –∏ —Ä–∞–∑–æ–≥—Ä–µ–≤–∞ –º—ã—à—Ü. –ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –Ω–∞—á–∞–ª–∞ –¥–Ω—è.',
            'exercises': [
                {
                    'name': '–ú–∞—Ö–∏ —Ä—É–∫–∞–º–∏',
                    'description': '–ö—Ä—É–≥–æ–≤—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è —Ä—É–∫–∞–º–∏ –¥–ª—è —Ä–∞–∑–æ–≥—Ä–µ–≤–∞ –ø–ª–µ—á–µ–≤—ã—Ö —Å—É—Å—Ç–∞–≤–æ–≤',
                    'repeat_count': 15,
                    'round_count': 2,
                    'rest_seconds': 30
                },
                {
                    'name': '–ü–æ–≤–æ—Ä–æ—Ç—ã –∫–æ—Ä–ø—É—Å–∞',
                    'description': '–°–∫—Ä—É—á–∏–≤–∞–Ω–∏—è –∫–æ—Ä–ø—É—Å–∞ –≤–ª–µ–≤–æ –∏ –≤–ø—Ä–∞–≤–æ –¥–ª—è —Ä–∞–∑–æ–≥—Ä–µ–≤–∞ –ø–æ–∑–≤–æ–Ω–æ—á–Ω–∏–∫–∞',
                    'repeat_count': 10,
                    'round_count': 2,
                    'rest_seconds': 30
                },
                {
                    'name': '–ü—Ä–∏—Å–µ–¥–∞–Ω–∏—è',
                    'description': '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏—Å–µ–¥–∞–Ω–∏—è –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –º—ã—à—Ü –Ω–æ–≥',
                    'repeat_count': 15,
                    'round_count': 2,
                    'rest_seconds': 45
                }
            ]
        },
        {
            'name': '–ö–∞—Ä–¥–∏–æ HIIT',
            'description': '–í—ã—Å–æ–∫–æ–∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–∞—è –∏–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –¥–ª—è —Å–∂–∏–≥–∞–Ω–∏—è –∫–∞–ª–æ—Ä–∏–π –∏ —É–∫—Ä–µ–ø–ª–µ–Ω–∏—è —Å–µ—Ä–¥–µ—á–Ω–æ-—Å–æ—Å—É–¥–∏—Å—Ç–æ–π —Å–∏—Å—Ç–µ–º—ã.',
            'exercises': [
                {
                    'name': '–ë–µ—Ä–ø–∏',
                    'description': '–ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ: –ø—Ä–∏—Å–µ–¥, —É–ø–æ—Ä –ª–µ–∂–∞, –æ—Ç–∂–∏–º–∞–Ω–∏–µ, –ø—Ä—ã–∂–æ–∫',
                    'repeat_count': 8,
                    'round_count': 4,
                    'rest_seconds': 90
                },
                {
                    'name': '–ü—Ä—ã–∂–∫–∏ —Å —Ä–∞–∑–≤–µ–¥–µ–Ω–∏–µ–º',
                    'description': '–ü—Ä—ã–∂–∫–∏ –Ω–∞ –º–µ—Å—Ç–µ —Å —Ä–∞–∑–≤–µ–¥–µ–Ω–∏–µ–º —Ä—É–∫ –∏ –Ω–æ–≥ (jumping jacks)',
                    'repeat_count': 20,
                    'round_count': 3,
                    'rest_seconds': 60
                },
                {
                    'name': '–í—ã—Å–æ–∫–∏–µ –∫–æ–ª–µ–Ω–∏',
                    'description': '–ë–µ–≥ –Ω–∞ –º–µ—Å—Ç–µ —Å –≤—ã—Å–æ–∫–∏–º –ø–æ–¥–Ω–∏–º–∞–Ω–∏–µ–º –∫–æ–ª–µ–Ω–µ–π',
                    'repeat_count': 30,
                    'round_count': 3,
                    'rest_seconds': 60
                },
                {
                    'name': '–ü–ª–∞–Ω–∫–∞',
                    'description': '–£–¥–µ—Ä–∂–∞–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –ø–ª–∞–Ω–∫–∏ –¥–ª—è —É–∫—Ä–µ–ø–ª–µ–Ω–∏—è –∫–æ—Ä–∞',
                    'repeat_count': 30,  # —Å–µ–∫—É–Ω–¥—ã
                    'round_count': 3,
                    'rest_seconds': 90
                }
            ]
        },
        {
            'name': '–°–∏–ª–æ–≤–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞',
            'description': '–ö–æ–º–ø–ª–µ–∫—Å —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º –≤–µ—Å–æ–º –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è —Å–∏–ª—ã –∏ –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç–∏ –≤—Å–µ—Ö –≥—Ä—É–ø–ø –º—ã—à—Ü.',
            'exercises': [
                {
                    'name': '–û—Ç–∂–∏–º–∞–Ω–∏—è',
                    'description': '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ –æ—Ç–∂–∏–º–∞–Ω–∏—è –æ—Ç –ø–æ–ª–∞ –¥–ª—è –º—ã—à—Ü –≥—Ä—É–¥–∏, –ø–ª–µ—á –∏ —Ç—Ä–∏—Ü–µ–ø—Å–æ–≤',
                    'repeat_count': 12,
                    'round_count': 3,
                    'rest_seconds': 60
                },
                {
                    'name': '–ü—Ä–∏—Å–µ–¥–∞–Ω–∏—è —Å –ø—Ä—ã–∂–∫–æ–º',
                    'description': '–ü—Ä–∏—Å–µ–¥–∞–Ω–∏—è —Å –≤—ã–ø—Ä—ã–≥–∏–≤–∞–Ω–∏–µ–º –≤–≤–µ—Ä—Ö –¥–ª—è –≤–∑—Ä—ã–≤–Ω–æ–π —Å–∏–ª—ã –Ω–æ–≥',
                    'repeat_count': 15,
                    'round_count': 3,
                    'rest_seconds': 90
                },
                {
                    'name': '–ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è',
                    'description': '–ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è –Ω–∞ —Ç—É—Ä–Ω–∏–∫–µ –¥–ª—è –º—ã—à—Ü —Å–ø–∏–Ω—ã –∏ –±–∏—Ü–µ–ø—Å–æ–≤',
                    'repeat_count': 8,
                    'round_count': 3,
                    'rest_seconds': 120
                },
                {
                    'name': '–í—ã–ø–∞–¥—ã',
                    'description': '–í—ã–ø–∞–¥—ã –≤–ø–µ—Ä–µ–¥ –ø–æ–ø–µ—Ä–µ–º–µ–Ω–Ω–æ –∫–∞–∂–¥–æ–π –Ω–æ–≥–æ–π',
                    'repeat_count': 12,
                    'round_count': 3,
                    'rest_seconds': 60
                }
            ]
        },
        {
            'name': '–ô–æ–≥–∞ –∏ —Ä–∞—Å—Ç—è–∂–∫–∞',
            'description': '–ö–æ–º–ø–ª–µ–∫—Å —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏, —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏—è –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫.',
            'exercises': [
                {
                    'name': '–°–æ–±–∞–∫–∞ –º–æ—Ä–¥–æ–π –≤–Ω–∏–∑',
                    'description': '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –ø–æ–∑–∞ –π–æ–≥–∏ –¥–ª—è —Ä–∞—Å—Ç—è–∂–∫–∏ –∑–∞–¥–Ω–µ–π –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –Ω–æ–≥ –∏ —Å–ø–∏–Ω—ã',
                    'repeat_count': 30,  # —Å–µ–∫—É–Ω–¥—ã —É–¥–µ—Ä–∂–∞–Ω–∏—è
                    'round_count': 3,
                    'rest_seconds': 30
                },
                {
                    'name': '–ö–æ—à–∫–∞-–∫–æ—Ä–æ–≤–∞',
                    'description': '–ú–æ–±–∏–ª–∏–∑–∞—Ü–∏—è –ø–æ–∑–≤–æ–Ω–æ—á–Ω–∏–∫–∞: –ø—Ä–æ–≥–∏–± –∏ –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ —Å–ø–∏–Ω—ã',
                    'repeat_count': 10,
                    'round_count': 2,
                    'rest_seconds': 30
                },
                {
                    'name': '–ü–æ–∑–∞ —Ä–µ–±–µ–Ω–∫–∞',
                    'description': '–†–∞—Å—Å–ª–∞–±–ª—è—é—â–∞—è –ø–æ–∑–∞ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∏ —Ä–∞—Å—Ç—è–∂–∫–∏ —Å–ø–∏–Ω—ã',
                    'repeat_count': 60,  # —Å–µ–∫—É–Ω–¥—ã —É–¥–µ—Ä–∂–∞–Ω–∏—è
                    'round_count': 2,
                    'rest_seconds': 30
                }
            ]
        }
    ]

    created_codes = []

    for workout_set in test_sets:
        try:
            # –°–æ–∑–¥–∞–µ–º –∫–æ–º–ø–ª–µ–∫—Å
            code = WorkoutSetModel.create(
                name=workout_set['name'],
                description=workout_set['description']
            )
            created_codes.append(code)
            print(f"‚úì –°–æ–∑–¥–∞–Ω –∫–æ–º–ø–ª–µ–∫—Å: {workout_set['name']}")

            # –°–æ–∑–¥–∞–µ–º —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –¥–ª—è –∫–æ–º–ø–ª–µ–∫—Å–∞
            exercise_codes = create_test_exercises(code, workout_set['exercises'])
            print(f"  –°–æ–∑–¥–∞–Ω–æ {len(exercise_codes)} —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π")

        except Exception as e:
            print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–ø–ª–µ–∫—Å–∞ {workout_set['name']}: {e}")

    return created_codes

def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è."""
    print("–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö...")

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–ª–µ–∫—Å—ã
    existing_sets = WorkoutSetModel.get_all()
    if existing_sets:
        print(f"–í –ë–î —É–∂–µ –µ—Å—Ç—å {len(existing_sets)} –∫–æ–º–ø–ª–µ–∫—Å–æ–≤")
        response = input("–°–æ–∑–¥–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–æ–º–ø–ª–µ–∫—Å—ã? (y/n): ")
        if response.lower() != 'y':
            print("–û—Ç–º–µ–Ω–µ–Ω–æ")
            return

        # –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
        confirm = input("–£–¥–∞–ª–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–ª–µ–∫—Å—ã –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –Ω–æ–≤—ã—Ö? (y/n): ")
        if confirm.lower() == 'y':
            for workout_set in existing_sets:
                try:
                    ExerciseModel.delete_by_workoutset(workout_set['code'])
                    WorkoutSetModel.delete(workout_set['code'])
                    print(f"‚úì –£–¥–∞–ª–µ–Ω –∫–æ–º–ø–ª–µ–∫—Å: {workout_set['name']}")
                except Exception as e:
                    print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ–º–ø–ª–µ–∫—Å–∞ {workout_set['name']}: {e}")

    # –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–æ–º–ø–ª–µ–∫—Å—ã
    created_codes = create_test_workout_sets()

    print(f"\nüéâ –°–æ–∑–¥–∞–Ω–æ {len(created_codes)} —Ç–µ—Å—Ç–æ–≤—ã—Ö –∫–æ–º–ø–ª–µ–∫—Å–æ–≤ —Å —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è–º–∏")
    print("\n–í—ã –º–æ–∂–µ—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:5000")

if __name__ == '__main__':
    main()